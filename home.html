<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>XISS Treasure Hunt</title>
<link rel="stylesheet" href="style.css">
</head>
<body>
<main class="page center">
  <div class="card">
    <h1>ðŸ”Ž XISS Treasure Hunt</h1>

    <p class="lead">Welcome, <strong id="teamNameDisplay">Team</strong> â€” your hunt is ready.</p>

    <div class="meta">
      <div id="teamNumberDisplay"></div>
      <div>Questions: 6</div>
    </div>

    <div class="actions" style="margin-top:14px;">
      <button class="btn primary" id="startHunt">Start the Hunt â†’</button>
      <a class="btn" href="rules.html">Rules & Instructions</a>
    </div>

    <small class="muted" style="display:block;margin-top:12px;">Show this page to the organiser if needed.</small>
  </div>
</main>

<script>
(() => {
  const name = localStorage.getItem('teamName') || '';
  const num = localStorage.getItem('teamNumber') || '';
  const seqRaw = localStorage.getItem('teamSeq');

  if(!name || !seqRaw){
    // not logged in
    window.location.href = 'index.html';
  }

  document.getElementById('teamNameDisplay').textContent = name;
  document.getElementById('teamNumberDisplay').textContent = num ? ('Team number: ' + num) : '';

  document.getElementById('startHunt').addEventListener('click', function(){
    // set startTime (if not already)
    if(!localStorage.getItem('startTime')){
      localStorage.setItem('startTime', Date.now().toString());
    }
    // ensure progressIndex exists
    if(!localStorage.getItem('progressIndex')) localStorage.setItem('progressIndex','0');

    // redirect to first question in the sequence
    const seq = JSON.parse(seqRaw);
    const idx = parseInt(localStorage.getItem('progressIndex') || '0', 10);
    const first = seq[idx];
    window.location.href = 'q' + first + '.html';
  });

})();
</script>
</body>
</html>
